# NBAI-API
Описание и примеры использования REST-подобного API Национального бюро автомобильных историй. Формат данных - JSON
## Ключ API

Ключ API выдается при предварителному согласованию с администрацией ресурса и используется для запроса информации по автомобилю

**ВНИМАНИЕ!** Используйте ключ только в защищеных частях приложения (на сервере).

## Адреса API
Для доступа к API используется http протокол. 

Адрес для запросов:
*http://api.nbai.ru*

## Запрос информации
NBAI-API предоставляет возможность запрашивать информацию с разных источников по отдельности. 
Некоторые источники могут передавать информацию только по VIN номеру автомобиля, другие могут передавать информацию как по VIN/номеру кузова так и по гос. номеру автомобиля. Подробнее в разделе "Описание источников"

Существует 2 вида информации:

1. Бесплатная
2. Платная

### Формат запроса

Запрос бесплатной информации по гос. номеру автомобиля:
*http://api.nbai.ru/v1/get_by_num/:API_KEY/:NUM/:DATA/free*

Где:
* API_KEY - ключ доступа к API
* NUM - гос. номер автомобиля
* DATA - название источника для получения данных (подробнее в разделе "Описание источников")
* free - пометка того, что мы получаем только бесплатную информацию

Запрос бесплатной информации по VIN/номеру кузова автомобиля. Использование VIN или номера кузова будет определено автоматически
*http://api.nbai.ru/v1/get_by_vin/:API_KEY/:VIN/:DATA/free*

Где:
* API_KEY - ключ доступа к API
* VIN - VIN номер/номер кузова
* DATA - название источника для получения данных (подробнее в разделе "Описание источников")
* free - пометка того, что мы получаем только бесплатную информацию


### Рабочий пример запроса
```javascript
Например нам нужно запросить информацию из базы ЕАИСТО по гос. номеру а999му199

GET http://api.nbai.ru/v1/get_by_num/my_api_key/а999му199/eaisto/free


Статусы:

* 200 - запрос прошел успешно, тело ответа содержит запрашиваемые данные
* 503 - ошибка сервера, возможно сервер перегружен
* 400 - ошибка валидации параметров запроса
* 404 - ошибка формаирования запроса. Проверьте правильность запроса
* остальные - ошибка сервера, возможно сервер перегружен

Ответ сервера:

{ "eaisto":
	[
		{
			"body":"WAUZZZ4G5CN021391", 	//Номер кузова
			"car":"АУДИ А6",				//название авто
			"date":"2014-09-23",			//дата выдачи ТО
			"dateto":"2016-09-23",			//Действие до
			"list":"201409232009069495800",	//Номер карты в ЕАИСТО
			"num":"А999МУ199",				//Номер авто
			"vin":"WAUZZZ4G5CN021391"		//VIN номер
		}
		
	],
   "data_price":0							//Стоимость полной версии данных в рублях
}


```
